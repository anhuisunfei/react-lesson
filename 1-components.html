<!DOCTYPE html>
<html lang="zh">

<head>
    <title>Koa React Rest Full</title>
    <meta charset="utf-8"/>
    <script src="bower_components/react/react.min.js"></script>
    <script src="bower_components/react/react-dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
</head>

<body>
    <div id="example" class="container">
    </div>

    <script type="text/babel">
    	var Hello=React.createClass({
    		getInitialState:function(){
    			return{
    				titleMessage:'你好，世界！',
    				messages:[
    					'消息1',
    					'消息2',
    					'消息3',
    				]
    			}
    		},
    		render:function(){
    			var submessageList=[];
    			for (var i = 0; i <10; i++) {
    				submessageList.push(
    					 <SubMessage messages={this.state.messages} />
    					)
    				if(i<9){
    					submessageList.push(<hr/>);
    				}
    			}
    			return (
    					<div>
    						<h1 >{this.state.titleMessage}</h1>
    						{submessageList}
    					</div>
					)
    		}
    	});
    	var SubMessage=React.createClass({
    		propTypes:{
    			messages:React.PropTypes.array.isRequired
    		},
    		getDefaultProps:function(){
    			return {
    				messages:['默认消息']
    			}
    		},
    		render:function(){
    			var msgs=[];
    			this.props.messages.forEach(function(msg,index){
    				msgs.push(
    						<p>码农说:{msg}</p>
    					);
    			});
    			return (
	    				<div>
	    					{msgs}
	    				</div>
    				)
    		}
    	});

    	var Footer=React.createClass({
    		render:function(){

    			return (
    					<small>{Date.now()}</small>
    				)	
    		}

    	})



        React.render(
        <Hello />, 
        document.getElementById('example') );
    </script>
</body>

</html>
